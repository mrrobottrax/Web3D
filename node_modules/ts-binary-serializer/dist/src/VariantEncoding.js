"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Variant;
(function (Variant) {
    Variant.MAX_UINT = 1073741824;
    Variant.MAX_INT = 536870912;
    Variant.MIN_INT = -1073741824;
})(Variant = exports.Variant || (exports.Variant = {}));
/**
 * max: 1<<30 1073741824
 * min: 0
 * @param v
 */
function EncodeVariant32Unsigned(v) {
    var ret = [];
    var BYTE = 128;
    while (v >= BYTE) {
        var b = (v & 0xFF) | BYTE;
        ret.push(b);
        v = (v >> 7);
    }
    ret.push(v);
    return ret;
}
exports.EncodeVariant32Unsigned = EncodeVariant32Unsigned;
function DecodeVariant32Unsigned(data) {
    var b = data[0];
    var index = 0;
    var ret = 0;
    while ((b & 128) > 0) {
        ret += (b & 127) << (index * 7);
        index++;
        b = data[index];
    }
    ret += (b & 127) << (index * 7);
    return ret;
}
exports.DecodeVariant32Unsigned = DecodeVariant32Unsigned;
/**
 * max: 1<<29 536870912
 * min: -(1<<30) -1073741824
 * @param v
 */
function EncodeVariant32Signed(v) {
    v = v >= 0 ? v * 2 : v * -2 - 1;
    return EncodeVariant32Unsigned(v);
}
exports.EncodeVariant32Signed = EncodeVariant32Signed;
function DecodeVariant32Signed(data) {
    var v = DecodeVariant32Unsigned(data);
    return v & 1 ? (v + 1) / -2 : v / 2;
}
exports.DecodeVariant32Signed = DecodeVariant32Signed;
